<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ysd.dao.RegisterMapper">
    
    <insert id="insertEmployeeCheck" parameterType="employee">
        insert into employeecheck(e_name,ec_checkInTime,ec_checkStatus) values(#{e_loginName},now(),1);
    </insert>
    
    <select id="selectIsTodayHaveCheckIn" parameterType="employeeCheck" resultType="_int">
        select count(1) from employeecheck
        where ec_checkInTime &gt; #{ec_checkInTime} and e_name = #{e_name}
    </select>
    
    <select id="selectIsTodayHaveCheckOut" parameterType="employeeCheck" resultType="_int">
        select count(1) from employeecheck
        where ec_checkOutTime &lt; #{ec_checkOutTime} and #{ec_ext1} &lt; NOW() and e_name = #{e_name}
    </select>
    
    <update id="updateEmployeeCheck" parameterType="employee">
        update employeecheck
        set ec_checkOutTime = now()
        where e_name = #{e_loginName}
    </update>
    
    <update id="updateEmployeeCheckStatus" parameterType="employee">
        update employee set e_ext4 = 1 where e_loginName = #{e_loginName}
    </update>
    
    <update id="updateEmployeeCheckOutStatus" parameterType="employee">
        update employee set e_ext4 = 2 where e_loginName = #{e_loginName}
    </update>
    
</mapper>